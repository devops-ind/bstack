# BrowserStack Artifact Uploader Configuration
# Replace ${VAR_NAME} with actual values or set as environment variables

browserstack:
  username: ${BROWSERSTACK_USER}
  access_key: ${BROWSERSTACK_ACCESS_KEY}
  api_endpoint: "https://api-cloud.browserstack.com/app-automate/upload"
  upload_timeout: 300

  # SSL/TLS Configuration for Corporate Networks
  # =============================================
  # If you're behind a corporate proxy with SSL inspection, configure these settings:

  # Option 1: Use custom CA certificate bundle (RECOMMENDED)
  # Set this to the path of your corporate CA certificate file
  # To get your corporate CA cert, see docs/SSL_CERTIFICATE_SETUP.md
  # Example: "/path/to/corporate-ca-bundle.crt"
  ssl_ca_bundle: null  # Set to certificate path or null to use system default

  # Option 2: Disable SSL verification (NOT RECOMMENDED - security risk!)
  # Only use this for testing/debugging in secure networks
  # Set to false to disable SSL certificate verification
  ssl_verify: true  # true (verify certs) or false (skip verification)

local_storage:
  artifact_base_path: "/shared/mobileapp/builds/mainline"
  verify_path_exists: true

  # Path templates for each platform (matching NFS structure)
  # Note: {build_type_lower} will be automatically converted to lowercase
  path_templates:
    android: "{base}/{platform}/{environment}/{build_type}/Android/enterprise/{app_variant}/build/app-{build_type_lower}.apk"
    android_hw: "{base}/{platform}/{environment}/{build_type}/Android/enterprise/{app_variant}/build/app-{build_type_lower}.apk"
    ios: "{base}/{platform}/{environment}/{build_type}/Ios/enterprise/{app_variant}/App.ipa"

  accepted_extensions:
    android: [".apk", ".aab"]
    android_hw: [".apk", ".aab"]
    ios: [".ipa"]

git:
  repo_url: "https://github.com/org/yaml-configs.git"
  default_branch: "main"
  user_name: "DevOps Automation"
  user_email: "devops@company.com"

  # Git workflow options:
  # If create_pr = true: Creates feature branch, commits, and creates PR
  # If create_pr = false: Commits directly to target_branch (no PR)
  create_pr: true

  # Target branch for direct commits (only used when create_pr = false)
  # When create_pr = true, feature branches are always created from default_branch
  target_branch: "main"

  pr_auto_merge: false

github:
  token: ${GITHUB_TOKEN}
  org: "your-org"
  repo: "yaml-configs"

notifications:
  teams:
    webhook_url: ${TEAMS_WEBHOOK_URL}
    mention_qa: true
    qa_group: "QA Team"

logging:
  level: "INFO"
  log_to_console: true

yaml_structure:
  # YAML files mapping - Direct file names in root directory
  # Map: platform/app_variant â†’ actual YAML file name
  yaml_files:
    android:
      ag: "browserstack_ag_Android.yml"
      re: "browserstack_re_Android.yml"
      wallet: "browserstack_ag_Android.yml"  # Not provided, default to ag
    android_hw:
      ag: "browserstackhuawi_ag.yml"
      re: "browserstackhuawi_re.yml"
      wallet: "browserstackhuawi_ag.yml"     # Not provided, default to ag
    ios:
      ag: "browserstackiOS_ag.yml"
      re: "browserstackiOS_re.yml"
      wallet: "browserstackiOS_ag.yml"       # Not provided, default to ag
  
  shared_file: "shared.yml"
  
  # YAML paths within files
  app_root_key: "apps"                    # apps.{app_variant}.{environment}.{build_type}
  environment_levels: ["environment", "build_type"]

retry:
  max_attempts: 3
  initial_delay: 2
  backoff_factor: 2
